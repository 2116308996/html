<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			#box{
				margin: 0 auto;
				border: 1px solid black;
				background-color: yellow;
				width: 610px;
				height: 424px;
				position: relative;
				overflow: hidden;
			}
			#box ul{
				position: absolute;
				list-style: none;
			}
			#box ul li{
				float: left;
				width: 600px;
				margin: 0 5px;
			}
			#box ul li img{
				width: 100%;
			}
			#navdiv{
				position: absolute;
				bottom: 20px;
				left: 50%;
				transform: translateX(-50%);
			}
			#navdiv>a{
				width: 20px;
				height: 20px;
				display: block;
				float: left;
				opacity: 0.5;
				margin: 0 5px;
				background-color: red;
			}
			#navdiv>a:hover{
				background-color: palevioletred;
			}
		</style>
		<script type="text/javascript">
		var timer;
			window.onload=function(){
				var imglist=document.getElementById("imglist");
				var imgArr=document.getElementById("box").getElementsByTagName("img");
				var allA=document.getElementById("navdiv").getElementsByTagName("a");
				imglist.style.width=imgArr.length*610+"px";
				// imglist.style.left="-605px";
				var  index=0;
				allA[index].style.backgroundColor="palevioletred";
				
				for(let i=0;i<allA.length;i++){
					allA[i].onclick=function(){
						index=i;
						setA(index);
						clearInterval(timer);
						move(imglist,-610*index,20,"left");
						 autochange();
					};
				}
				 autochange();
				// 改变按钮
				function setA(index){
					if(index>=imgArr.length-1){
						index=0;
						imglist.style.left=0;
					}
					for(var i=0;i<allA.length;i++){
						allA[i].style.backgroundColor="";
					}
					allA[index].style.backgroundColor="palevioletred";
				};
				// move
				function move(obj,target,speed,attr,callback){
					clearInterval(obj.timer);
					var lt=parseInt(getComputedStyle(obj,null)[attr])+speed+"px"; 
					if(parseInt(lt)>target){
						speed=-speed;
					}
					obj.timer=setInterval(function(){
						lt=parseInt(getComputedStyle(obj,null)[attr])+speed+"px"; 
						if(parseInt(lt)>target&&speed>0||speed<0&&parseInt(lt)<target){
							lt=target+"px";
						}
						obj.style[attr]=lt;
						if(parseInt(lt)==target){
							clearInterval(obj.timer);
							callback && callback();
						}
					},30);
				};
				// 自动切换图片
				function autochange(){
					timer=setInterval(function(){
						index++;
						index=index%imgArr.length;
						move(imglist,-610*index,20,"left",function(){
							setA(index);
						} );
					},2000);
				};
			};
		</script>
	</head>
	<body>
		<div id="box">
			<ul id="imglist">
				<li><img src="../image/21.jpg" alt=""></li>
				<li><img src="../image/21.jpg" alt=""></li>
				<li><img src="../image/21.jpg" alt=""></li>
				<li><img src="../image/21.jpg" alt=""></li>
				<li><img src="../image/21.jpg" alt=""></li>
				<li><img src="../image/21.jpg" alt=""></li>
			</ul>
			<!-- 创建导航按钮 -->
			<div id="navdiv">
				<a href="javascript:;"></a>
			    <a href="javascript:;"></a>
			    <a href="javascript:;"></a>
			    <a href="javascript:;"></a>
			    <a href="javascript:;"></a>
			</div>
			
		</div>
	</body>
</html>
